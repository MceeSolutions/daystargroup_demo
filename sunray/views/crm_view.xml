<odoo>
    <data>

        <record id="sunray_crm_case_form_view_leads" model="ir.ui.view">
            <field name="name">sunray.crm.lead.form.leadform</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_set_lost']" position="before">
                    <field name="lead_approval" invisible="1"/>
                    <button name="button_submit" string="Submit" type="object" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('active', '=', True)]}"/>
                    <button name="button_approve" states="submit" string="Approve" type="object" groups="account.group_account_invoice"/>
                    <button name="button_reject" states="submit" string="Reject" type="object" groups="account.group_account_invoice"/>
                    <button name="button_reset" states="reject" string="Set to Draft" type="object" />
                    <field name="state" widget="statusbar" statusbar_visible="draft,submit,approve" readonly="1"/>
                </xpath>

                <xpath expr="//button[@name='toggle_active']" position="replace">
                    <button name="toggle_active" string="Restore" type="object" attrs="{'invisible': ['|', ('probability', '&gt;', 0), ('active', '=', True)]}"/>
                </xpath>
                <xpath expr="//button[@name='action_set_lost']" position="replace">
                    <button name="action_set_lost" string="Mark as Lost" type="object" attrs="{'invisible': ['&amp;', ('probability', '=', 0), ('active', '=', False)]}"/>
                </xpath>
                <field name="mobile" position="after">
                    <field name="private_lead"/>
                </field>
            </field>
        </record>

        <record id="pipeline_sunray_form" model="ir.ui.view">
            <field name="name">pipeline.sunray.form</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_set_won_rainbowman']" position="before">
                    <!-- <button name="create_project" string="Create Project" type="object" class="btn-primary"/> 
                    <button name="button_request_site_code" string="Request Site Code" type="object" attrs="{'invisible': [('request_site_code', '=', True)]}"/>-->
                    <button name="%(sunray.site_code_request_action)d" string="Request Site Code" type="action" attrs="{'invisible': [('request_site_code', '=', True)]}"/>
                </xpath>
                <xpath expr="//button[@name='action_set_won_rainbowman']" position="replace">
                    <button name="action_set_won_rainbowman" string="Mark Won" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('active','=',False), ('probability', '=', 100)]}" confirm="are you sure this lead has been won?"/>
                </xpath>
                <xpath expr="//button[@name='action_set_won_rainbowman']" position="after">
                    <button name="%(CustomerRequest_action_window)d" type='action' string='Customer Request'/>
                    <!--<button name="send_site_audit_request_mail" string="Send Site Audit Request" type="object" class="btn-primary" confirm="You are about to send site audit request"/>
                    <button name="create_manufacturing_order" string="Create System Design" type="object" class="btn-primary"/>
                    <button name="button_submit_legal" string="request legal review" type="object" attrs="{'invisible': [('legal_review', '=', True)]}"/>
                    <button name="button_submit_legal_done" string="legal review done" type="object" attrs="{'invisible': ['|', ('legal_review', '!=', True), ('legal_review_done', '=', True)]}"/>-->
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="after">
                    <field name="company_id" invisible="1"/>
                </xpath>
                <field name="tag_ids" position="after">
                    <!-- <field name="size" />-->
                    <!-- <field name="type_of_offer" attrs="{'invisible': [('company_id', '!=', 5)]}"/> -->
                    <!-- <field name="site_code_id?" domain="[('partner_id','=', partner_id)]" widget="selection" /> -->
                    <!-- <field name="site_code_ids" widget="many2many_tags" domain="[('partner_id','=', partner_id)]"/>  -->
                    <!-- <field name="budget"/> -->
                    <field name="contract_duration" />
                    <field name="coordinates" />
                    <field name="type_of_offer" />
                    <field name="tariff_per_kwp" />
                    <field name="solar_capacity" />
                    <field name="total_capacity" />
                    <!-- <field name="currency_id" attrs="{'invisible': [('company_id', '!=', 5)]}"/> 
                    <field name="nord_type_of_sales" attrs="{'invisible': [('company_id', '!=', 1)]}"/>
                    <field name="nord_type_of_offer" attrs="{'invisible': [('company_id', '!=', 1)]}"/>
                    <field name="nord_size" attrs="{'invisible': [('company_id', '!=', 1)]}"/> -->
                </field>
                <field name="name" position="before">
                    <field name="legal_review" invisible="1"/>
                    <field name="legal_review_done" invisible="1"/>
                    <field name="request_site_code" invisible="1"/>
                </field>
                <field name="team_id" position="after">
                    <field name="client_type" />
                    <field name="site_area" />
                    <field name="site_address" />
                    <field name="site_type" />
                    <field name="site_location_id" />
                    <field name="region" />
                    <field name="country_id" />
                    <field name="monthly_service_fees" />
                    <field name="sales_price" />
                    <field name="opportunity_created_date"/>
                </field>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sunray_crm_legal_approval_action_window">
            <field name="name">Legal Approval (Opportunities)</field>
            <field name="res_model">crm.lead</field>
            <field name="context">{}</field>
            <field name="domain">[('legal_review', '=', True)]</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="sunray_crm_leads_approval_action_window">
            <field name="name">Leads Approval</field>
            <field name="res_model">crm.lead</field>
            <field name="context">{}</field>
            <field name="domain">[('active', '=', False)]</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem name="Customer Request" id="customer_request_menu" parent="crm.crm_menu_root" action="CustomerRequest_action_window" sequence="10"/>

        <menuitem name="Contact Request" id="contact_request_menu" parent="crm.crm_menu_root" action="ContactRequest_action_window" sequence="12"/>

        <!-- <menuitem name="Potential Customer" id="potential_customer_menu" parent="crm.crm_menu_sales" action="PotentialCustomer_action_window" sequence="90"/> lekan debug -->

        <menuitem name="Customer Type" id="customer_type_menu" parent="crm.crm_menu_config" action="customer_type_action_window" sequence="4"/>

        <menuitem id="sunray_crm_legal_id" name="Legal" parent="crm.crm_menu_root" sequence="20" groups="sunray.group_legal_team"/>
        <menuitem id="sunray_crm_legal_approval_id" name="Legal Approval" parent="sunray_crm_legal_id" sequence="20" groups="sunray.group_legal_team" action="sunray_crm_legal_approval_action_window"/>
        <menuitem id="sunray_crm_leads_approval_id" name="Leads Approval" parent="sunray_crm_legal_id" sequence="20" groups="sunray.group_legal_team" action="sunray_crm_leads_approval_action_window"/>

        <!-- <menuitem id="crm.res_partner_menu_customer" name="Customers" parent="crm.crm_menu_sales" action="crm_action_partner_form" sequence="5"/> -->

        <menuitem name="Site Code" id="site_location_id" parent="crm.crm_menu_root" action="site_location_action_window" groups="sunray.group_ict"/>

    </data>
</odoo>